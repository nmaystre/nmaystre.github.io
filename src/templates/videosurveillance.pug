doctype html
html(lang='ru')
  head
  meta(charset='UTF-8')
  meta(name='viewport' content='width=device-width, initial-scale=1')
  meta(name='robots' content='noindex')
  title
  meta(name='description' content='')
  link(rel='stylesheet' href='css/main.css')

  body.grid
    include components/header
      script(src="https://cdn.jsdelivr.net/npm/hls.js@latest")
    main.grid__video
      include components/video
      script.
        function initVideo(video, url) {
          if (Hls.isSupported()) {
            var hls = new Hls();
            hls.loadSource(url);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, function () {
              video.play();
            });
          } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = 'https://video-dev.github.io/streams/x36xhzz/x36xhzz.m3u8';
            video.addEventListener('loadedmetadata', function () {
              video.play();
            });
          }
        }
        initVideo(
          document.getElementById('video-1'),
          '1http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fsosed%2Fmaster.m3u8'
        );
        initVideo(
          document.getElementById('video-2'),
          '1http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fcat%2Fmaster.m3u8'
        );
        initVideo(
          document.getElementById('video-3'),
          '1http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fdog%2Fmaster.m3u8'
        );
        initVideo(
          document.getElementById('video-4'),
          '1http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fhall%2Fmaster.m3u8'
        );
    include components/footer
    script(src='js/bundle.js' type="module")